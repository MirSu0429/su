<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="../static/css/bootstrap.min.css">
    <link rel="stylesheet" href="../static/css/bootstrap-table.min.css">
    <link rel="stylesheet" href="../static/css/style.css">
    <script type="text/javascript" src="../static/js/jquery-3.3.1.min.js"></script>
    <script type="text/javascript" src="../static/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../static/js/bootstrap-table.min.js"></script>
    <script type="text/javascript" src="../static/js/layer.js"></script>
</head>
<body>
<div id="insertWid" class="container-fluid">
        <form method="get" role="form" class="form-horizontal border" id="purchaseForm">
            <br/>
            <div class="row">
                <div class="col-lg-12">
                    <div class="form-group row">
                        <label class="offset-lg-1 col-lg-2 control-label">任务名称：</label>
                        <div class="col-lg-8">
                            <input type="text" class="form-control" id="jobName">
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="offset-lg-1 col-lg-2 control-label">任务类名：</label>
                        <div class="col-lg-8">
                            <input type="text" class="form-control" id="clazzPath">
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="offset-lg-1 col-lg-2 control-label">表达式：<a href="http://cron.qqe2.com/" target="_blank">在线生成</a></label>
                        <div class="col-lg-8">
                            <input type="text" class="form-control" id="cron">
                        </div>
                    </div>
                </div>
            </div>
        </form>
    <br/><br/><br/>
    <div class="row">
        <div class="offset-lg-5 col-lg-1">
            <input type="button" class="btn btn-primary" value="提交" onclick="insert()">
        </div>
        <div class="col-lg-1">
            <input type="button" class="btn btn-primary" value="取消" onclick="back()">
        </div>
    </div>
</div>
</body>
<script>
    function insert() {
        $.ajax({
            url : '/insert',
            type: 'POST',
            data:{
                jobName : $("#jobName").val(),
                clazzPath : $("#clazzPath").val(),
                cron : $("#cron").val()
            },
            success :function (data) {
                window.parent.refresh();
                back();
            }
        })
    }
    function back() {
        var index = parent.layer.getFrameIndex(window.name); //先得到当前iframe层的索引
        //layer.msg(index);
        parent.layer.close(index); //再执行关闭
    }
</script>
</html>